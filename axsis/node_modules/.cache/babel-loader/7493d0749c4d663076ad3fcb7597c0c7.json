{"ast":null,"code":"const util = require('../util');\n\nconst jsesc = require('jsesc');\n\nconst toNode = curlCommand => {\n  const request = util.parseCurlCommand(curlCommand);\n  let nodeCode = 'var request = require(\\'request\\');\\n\\n';\n\n  if (request.headers || request.cookies) {\n    nodeCode += 'var headers = {\\n';\n    const headerCount = Object.keys(request.headers).length;\n    let i = 0;\n\n    for (const headerName in request.headers) {\n      nodeCode += '    \\'' + headerName + '\\': \\'' + request.headers[headerName] + '\\'';\n\n      if (i < headerCount - 1 || request.cookies) {\n        nodeCode += ',\\n';\n      } else {\n        nodeCode += '\\n';\n      }\n\n      i++;\n    }\n\n    if (request.cookies) {\n      const cookieString = util.serializeCookies(request.cookies);\n      nodeCode += '    \\'Cookie\\': \\'' + cookieString + '\\'\\n';\n    }\n\n    nodeCode += '};\\n\\n';\n  }\n\n  if (request.data) {\n    if (typeof request.data === 'number') {\n      request.data = request.data.toString();\n    } // escape single quotes if there are any in there\n\n\n    if (request.data.indexOf(\"'\") > -1) {\n      request.data = jsesc(request.data);\n    }\n\n    nodeCode += 'var dataString = \\'' + request.data + '\\';\\n\\n';\n  }\n\n  nodeCode += 'var options = {\\n';\n  nodeCode += '    url: \\'' + request.url + '\\'';\n\n  if (request.method !== 'get') {\n    nodeCode += ',\\n    method: \\'' + request.method.toUpperCase() + '\\'';\n  }\n\n  if (request.headers || request.cookies) {\n    nodeCode += ',\\n';\n    nodeCode += '    headers: headers';\n  }\n\n  if (request.data) {\n    nodeCode += ',\\n    body: dataString';\n  }\n\n  if (request.auth) {\n    nodeCode += ',\\n';\n    const splitAuth = request.auth.split(':');\n    const user = splitAuth[0] || '';\n    const password = splitAuth[1] || '';\n    nodeCode += '    auth: {\\n';\n    nodeCode += \"        'user': '\" + user + \"',\\n\";\n    nodeCode += \"        'pass': '\" + password + \"'\\n\";\n    nodeCode += '    }\\n';\n  } else {\n    nodeCode += '\\n';\n  }\n\n  nodeCode += '};\\n\\n';\n  nodeCode += 'function callback(error, response, body) {\\n';\n  nodeCode += '    if (!error && response.statusCode == 200) {\\n';\n  nodeCode += '        console.log(body);\\n';\n  nodeCode += '    }\\n';\n  nodeCode += '}\\n\\n';\n  nodeCode += 'request(options, callback);';\n  return nodeCode + '\\n';\n};\n\nmodule.exports = toNode;","map":{"version":3,"sources":["/home/marcel/Desktop/CobaProject/GUI backless-js/axsis/node_modules/curlconverter/generators/node.js"],"names":["util","require","jsesc","toNode","curlCommand","request","parseCurlCommand","nodeCode","headers","cookies","headerCount","Object","keys","length","i","headerName","cookieString","serializeCookies","data","toString","indexOf","url","method","toUpperCase","auth","splitAuth","split","user","password","module","exports"],"mappings":"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","sourcesContent":["const util = require('../util')\nconst jsesc = require('jsesc')\n\nconst toNode = curlCommand => {\n  const request = util.parseCurlCommand(curlCommand)\n  let nodeCode = 'var request = require(\\'request\\');\\n\\n'\n  if (request.headers || request.cookies) {\n    nodeCode += 'var headers = {\\n'\n    const headerCount = Object.keys(request.headers).length\n    let i = 0\n    for (const headerName in request.headers) {\n      nodeCode += '    \\'' + headerName + '\\': \\'' + request.headers[headerName] + '\\''\n      if (i < headerCount - 1 || request.cookies) {\n        nodeCode += ',\\n'\n      } else {\n        nodeCode += '\\n'\n      }\n      i++\n    }\n    if (request.cookies) {\n      const cookieString = util.serializeCookies(request.cookies)\n      nodeCode += '    \\'Cookie\\': \\'' + cookieString + '\\'\\n'\n    }\n    nodeCode += '};\\n\\n'\n  }\n\n  if (request.data) {\n    if (typeof request.data === 'number') {\n      request.data = request.data.toString()\n    }\n    // escape single quotes if there are any in there\n    if (request.data.indexOf(\"'\") > -1) {\n      request.data = jsesc(request.data)\n    }\n    nodeCode += 'var dataString = \\'' + request.data + '\\';\\n\\n'\n  }\n\n  nodeCode += 'var options = {\\n'\n  nodeCode += '    url: \\'' + request.url + '\\''\n  if (request.method !== 'get') {\n    nodeCode += ',\\n    method: \\'' + request.method.toUpperCase() + '\\''\n  }\n\n  if (request.headers || request.cookies) {\n    nodeCode += ',\\n'\n    nodeCode += '    headers: headers'\n  }\n  if (request.data) {\n    nodeCode += ',\\n    body: dataString'\n  }\n\n  if (request.auth) {\n    nodeCode += ',\\n'\n    const splitAuth = request.auth.split(':')\n    const user = splitAuth[0] || ''\n    const password = splitAuth[1] || ''\n    nodeCode += '    auth: {\\n'\n    nodeCode += \"        'user': '\" + user + \"',\\n\"\n    nodeCode += \"        'pass': '\" + password + \"'\\n\"\n    nodeCode += '    }\\n'\n  } else {\n    nodeCode += '\\n'\n  }\n  nodeCode += '};\\n\\n'\n\n  nodeCode += 'function callback(error, response, body) {\\n'\n  nodeCode += '    if (!error && response.statusCode == 200) {\\n'\n  nodeCode += '        console.log(body);\\n'\n  nodeCode += '    }\\n'\n  nodeCode += '}\\n\\n'\n  nodeCode += 'request(options, callback);'\n\n  return nodeCode + '\\n'\n}\n\nmodule.exports = toNode\n"]},"metadata":{},"sourceType":"script"}